extends extenders/layout

block content
    //Start of Header
    header(class='Info')
        div(id='head')
            div(id='pageTitle')
                h1= title
                    br
                    span(id='version')='0.1 Alpha'
                img(id='DashboardLogo' alt='Dashboard Logo' height='70px' width='70px' src='images/scrapdblogo.png')

            div(id='Logo')
                img(id='tfiLofo' alt='TfiLogo' src='images/tfi_logo_256.png')

        div(id='bldgButtons')
            button(id='AllPlantButton' class='button')= 'All Plants'
            button(id='plant1Button'   class='button')= 'Plant 1'
            button(id='plant2Button'   class='button')= 'Plant 2'
            button(id='hqButton'       class='button')= 'Plant 3'

        div(id='small_images')
            img(src='images/note64x64.png' onclick='findReportNoteWindow()' height='32' width='32')
            img(src='images/zoom64x64.png' id='searchButton' height='32' width='32')
            img(src='images/help64x64.png' onclick='helpWindow()' height='32' width='32')
    //End of Header

    //Start of Windows
    div(id='Search' class='modal')
        div(id='SearchContent' class='modal-content')
            div(class='modal-header')
                span(class='close')='X'
                h2= 'Header'
        div(class='modal-body')
            p= 'body text'
            select
        div(class='modal-footer')
            input(class='Info' id='SearchSelect' type='button' value='Select')
    //End of Windows

    //Start of Main
    main
        //Start of plant all
        div(class='Info' id='plantAll')
            div(class='tab')
                button(class='tablinks' onclick='openTab(event, "AllPlantDetails")')= 'All'
            div(id='AllPlantDetails' class='tabcontent')
                div(id='AllPlantChart' class='data')= 'All Plant Chart'
                div(id='AllPlantCircleChart' class='data')= 'All Plant Circle Chart'
                div(id='AllPlantGrid' class='data')= 'All Plant Grid'
        //End of plant all

        //Start of plant one
        div(class='Info' id='plant1')
            div(class='tab')
                button(class='tablinks' onclick='openTab(event, "plantOneAllDetails")')= 'All Plant'
                button(class='tablinks' onclick='openTab(event, "plantOneDuctDetails")')= 'Ducts /Bin Seal'
                button(class='tablinks' onclick='openTab(event, "plantOneTubeDetails")')= 'Tubes'
                button(class='tablinks' onclick='openTab(event, "plantOneCoversDetails")')= 'Cover'
                button(class='tablinks' onclick='openTab(event, "plantOneAssemblyDetails")')= 'Assembly'
                button(class='tablinks' onclick='openTab(event, "plantOneOtherDetails")')= 'Other'

            div(id='plantOneAllDetails' class='tabcontent')
                div(id='plant1AllChart' class='data')= 'All Plant 1'
                div(id='plant1AllCircleChart' class='data')= 'Circle Chart'
                div(id='plant1AllGrid' class='data')

            div(id='plantOneDuctDetails' class='tabcontent')
                div(id='plant1DuctChart' class='data')= 'Ducts Chart'
                div(id='plant1DuctCircleChart' class='data')= 'Circle Chart'
                div(id='plant1DuctGrid' class='data')= 'Ducts Grid'

            div(id='plantOneTubeDetails' class='tabcontent')
                div(id='plant1TubeChart' class='data')
                    canvas(id='plant1TubeChartCanvas' class='barChart')
                div(id='plant1TubeCircleChart' class='data')= 'Circle Chart'
                div(id='plant1TubeGrid' class='data')= 'Tubes Grid'

            div(id='plantOneCoversDetails' class='tabcontent')
                div(id='plant1CoversChart' class='data')= 'Covers Chart'
                div(id='plant1CoversCircleChart' class='data')= 'Circle Chart'
                div(id='plant1CoversGrid' class='data')= 'Covers Grid'

            div(id='plantOneAssemblyDetails' class='tabcontent')
                div(id='plant1AssemblyChart' class='data')= 'Assembly Chart'
                div(id='plant1AssemblyCircleChart' class='data')= 'Circle Chart'
                div(id='plant1AssemblyGrid' class='data')= 'Assembly Grid'

            div(id='plantOneOtherDetails' class='tabcontent')
                div(id='plant1OtherChart' class='data')= 'Other Chart'
                div(id='plant1OtherCircleChart' class='data')= 'Circle Chart'
                div(id='plant1OtherGrid' class='data')= 'Other Grid'
         //End plant one

        //Start of plant two
        div(class='Info' id='plant2')
            div(class='tab')
                button(class='tablinks' onclick='openTab(event, "plantTwoAllDetails")')= 'All Plant 2'
                button(class='tablinks' onclick='openTab(event, "plantTwoPlenDetails")')= 'Plenums'
                button(class='tablinks' onclick='openTab(event, "plantTwo2FCDetails")')= 'Flex Hose / Caps'
                button(class='tablinks' onclick='openTab(event, "plantTwoDownDetails")')= 'Downers'

            div(id='plantTwoAllDetails' class='tabcontent')
                div(id='plant2AllChart' class='data')= 'All Plant 2'
                div(id='plant2AllCircleChart' class='data')= 'Circle Chart'
                div(id='plant2AllGrid' class='data')

            div(id='plantTwoPlenDetails' class='tabcontent')
                div(id='plant2PlenChart' class='data')= 'Plenums'
                div(id='plant2PlenCircleChart' class='data')= 'Circle Chart'
                div(id='plant2PlenGrid' class='data')

            div(id='plantTwo2FCDetails' class='tabcontent')
                div(id='plant2FCChart' class='data')= 'Flex Hose / Caps'
                div(id='plant2FCCircleChart' class='data')= 'Circle Chart'
                div(id='plant2FCGrid' class='data')= 'Grid'

            div(id='plantTwoDownDetails' class='tabcontent')
                div(id='plant2DownChart' class='data')= 'Downers'
                div(id='plant2DownCircleChart' class='data')= 'Circle Chart'
                div(id='plant2DownGrid' class='data')= 'Grid'

        //End of plant two

        //Start of plant three
        div(class='Info' id='plant3')
            div(class='tab')
                button(class='tablinks' onclick='openTab(event, "plantThreeAllDetails")')= 'All HQ'
                button(class='tablinks' onclick='openTab(event, "plantThreeP8Details")')= 'P8'
                button(class='tablinks' onclick='openTab(event, "plantThreePrimaryDetails")')= 'Primary Ops'
                button(class='tablinks' onclick='openTab(event, "plantThreeSleevesDetails")')= 'Sleeves'
                button(class='tablinks' onclick='openTab(event, "plantThree737WDetails")')= '737 Windows'
                button(class='tablinks' onclick='openTab(event, "plantThree787WDetails")')= '787 Windows'
                button(class='tablinks' onclick='openTab(event, "plantThreeBSIDetails")')= 'BSI Windows'
                button(class='tablinks' onclick='openTab(event, "plantThreeAllWindowsDetails")')= 'All Windows'

            div(id='plantThreeAllDetails' class='tabcontent')
                div(id='plant3AllChart' class='data')= 'All Plant 3'
                div(id='plant3AllCircleChart' class='data')= 'Circle Chart'
                div(id='plant3AllGrid' class='data')= 'Grid'

            div(id='plantThreeP8Details' class='tabcontent')
                div(id='plant3P8Chart' class='data')= 'P8'
                div(id='plant3P8CircleChart' class='data')= 'Circle Chart'
                div(id='plant3P8Grid' class='data')= 'Grid'

            div(id='plantThreePrimaryDetails' class='tabcontent')
                div(id='plant3PrimaryChart' class='data')= 'Primary Ops'
                div(id='plant3PrimaryCircleChart' class='data')= 'Circle Chart'
                div(id='plant3PrimaryGrid' class='data')= 'Grid'

            div(id='plantThreeSleevesDetails' class='tabcontent')
                div(id='plant3SleevesChart' class='data')= 'Sleeves'
                div(id='plant3SleevesCircleChart' class='data')= 'Circle Chart'
                div(id='plant3SleevesGrid' class='data')= 'Grid'

            div(id='plantThree737WDetails' class='tabcontent')
                div(id='plant3737WChart' class='data')= '737 Windows'
                div(id='plant3737WCircleChart' class='data')= 'Circle Chart'
                div(id='plant3737WGrid' class='data')= 'Grid'

            div(id='plantThree787WDetails' class='tabcontent')
                div(id='plant3787WChart' class='data')= '787 Windows'
                div(id='plant3787WCircleChart' class='data')= 'Circle Chart'
                div(id='plant3787WGrid' class='data')= 'Grid'

            div(id='plantThreeBSIDetails' class='tabcontent')
                div(id='plant3BSIChart' class='data')= 'BSI Windows'
                div(id='plant3BSICircleChart' class='data')= 'Circle Chart'
                div(id='plant3BSIGrid' class='data')= 'Grid'

            div(id='plantThreeAllWindowsDetails' class='tabcontent')
                div(id='plant3AllWindowsChart' class='data' )= 'All Windows'
                div(id='plant3AllWindowsCircleChart' class='data')= 'Circle Chart'
                div(id='plant3AllWindowsGrid' class='data')= 'Grid'
        //End of plant three

    //End of Main

    include ./JSCalls
    script(type='text/javascript').

         var TD = !{TubesData};
         console.log(TD);

         var DataArray = [];
         DataArray = TD;
         var date = [];
         var Value = [];

         for(var i = 0; i < DataArray.length; i++){
         date.push(DataArray[i].Date);
         Value.push(DataArray[i].EndingBalance);

         }

         var Tubeschart = $('#plant1TubeChartCanvas');
         var myChart = new Chart(Tubeschart, {
         type: 'bar',
         data: {
         labels: date,
         datasets: [
         {
         label: 'Ending Balance',
         backgroundColor: 'rgba(0, 140, 219, 1)',
         borderColor: 'rgba(0, 140, 219, 1)',
         hoverBackgroundColor: 'rgba(0, 90, 255, 1)',
         hoverBorderColor: 'rgba(0, 90, 255, 1)',
         data: Value
         }
         ]
         },
         options: {
            animation: {
                duration: 4000
                },
            labels:{
                fontColor: '#ffffff'
                }
            }
         });

         Tubeschart.click(function (e) {
         var activeBars = myChart.getElementsAtEvent(e);
         var chartData = activeBars[0]['_chart'].config.data;
         var idx = activeBars[0]['_index'];
         var label = chartData.labels[idx];
         var value = chartData.datasets[0].data[idx];
         console.log("Label: " + label + " Value: " + value);
         });


            //var year = 2017;
            //var tab = 'Tubes';
            //$.ajax({
            //    type: 'GET',
            //    url: '/plantOne/',
            //    success: function (data) {

             //       console.log(data);
             //   },
             //   error: function (xhr, status, error) {
             //       console.log(xhr);
             //       console.log(status);
             //       console.log(error);
             //   }

            //});

            var modal = document.getElementById('Search');


            // Get the <span> element that closes the modal
            var span = document.getElementsByClassName("close")[0];

            // When the user clicks on <span> (x), close the modal
            span.onclick = function () {
                modal.style.display = "none";
            }

            // When the user clicks anywhere outside of the modal, close it
            window.onclick = function (event) {
                if (event.target === modal) {
                    modal.style.display = "none";
                }
            }

            function WhenBodyLoad() {
                HideTabs();
                $('#plantAll').show();
                $('#AllPlantDetails').show();
            }

            function openTab(evt, Tab) {
                // Declare all variables
                var i, tabcontent, tablinks;

                // Get all elements with class="tabcontent" and hide them
                tabcontent = document.getElementsByClassName("tabcontent");
                for (i = 0; i < tabcontent.length; i++) {
                    tabcontent[i].style.display = "none";
                }

                // Get all elements with class="tablinks" and remove the class "active"
                tablinks = document.getElementsByClassName("tablinks");
                for (i = 0; i < tablinks.length; i++) {
                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                }

                // Show the current tab, and add an "active" class to the button that opened the tab
                document.getElementById(Tab).style.display = "block";
                evt.currentTarget.className += " active";
            }

            function Search() {

            }

